# –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: –ö–æ–Ω—Ç–µ–Ω—Ç-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä

–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ —Ä–∞–∑–¥–µ–ª–∞ Inspiration.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
–¢–∞–±–ª–∏—Ü–∞: `public.effects_gallery`

**–ù–æ–≤—ã–µ –ø–æ–ª—è (Content Constructor):**
- `placement` ‚Äî –≥–¥–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å (`'home'` | `'inspiration'`)
- `status` ‚Äî —Å—Ç–∞—Ç—É—Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ (`'draft'` | `'published'`)
- `category` ‚Äî –∫–∞—Ç–µ–≥–æ—Ä–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `portrait`, `landscape`, `art`)
- `priority` ‚Äî –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (0-100, –≤—ã—à–µ = —Ä–∞–Ω—å—à–µ)
- `type` ‚Äî —Ç–∏–ø —Ñ–∞–π–ª–∞ (`'image'` | `'video'`)
- `asset_url` ‚Äî URL –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
- `preview_url` ‚Äî URL –ø—Ä–µ–≤—å—é (–ø–ª–∏—Ç–∫–∞ –≤ –≥–∞–ª–µ—Ä–µ–µ)
- `poster_url` ‚Äî URL –ø–æ—Å—Ç–µ—Ä–∞ (–¥–ª—è –≤–∏–¥–µ–æ)
- `aspect` ‚Äî —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Å—Ç–æ—Ä–æ–Ω (`'1:1'` | `'9:16'` | `'16:9'`)
- `short_description` ‚Äî –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏

**RLS –ü–æ–ª–∏—Ç–∏–∫–∏:**
- –ü—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø (SELECT): —Ç–æ–ª—å–∫–æ –¥–ª—è `status = 'published'`
- –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –∏ –∞–¥–º–∏–Ω—ã: –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø (INSERT/UPDATE/DELETE)

### API Endpoints

#### Admin (—Ç—Ä–µ–±—É–µ—Ç —Ä–æ–ª—å `manager` –∏–ª–∏ `admin`)

**GET /api/admin/gallery**
–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–≤–∫–ª—é—á–∞—è —á–µ—Ä–Ω–æ–≤–∏–∫–∏)
```
Query params:
  - placement: 'home' | 'inspiration'
  - status: 'draft' | 'published'
  - category: string
```

**POST /api/admin/gallery**
–°–æ–∑–¥–∞—Ç—å –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É
```json
{
  "id": "uuid (optional, –¥–ª—è update)",
  "presetId": "content-123",
  "title": "–ù–∞–∑–≤–∞–Ω–∏–µ",
  "placement": "home",
  "status": "published",
  "category": "portrait",
  "priority": 10,
  "type": "image",
  "assetUrl": "https://...",
  "previewImage": "https://...",
  "posterUrl": "https://...",
  "aspect": "1:1",
  "shortDescription": "–û–ø–∏—Å–∞–Ω–∏–µ",
  "contentType": "photo",
  "modelKey": "nano-banana-pro",
  "costStars": 4,
  ...
}
```

**DELETE /api/admin/gallery?presetId=xxx**
–£–¥–∞–ª–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É

**POST /api/admin/content/upload**
–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ/–≤–∏–¥–µ–æ)
```
FormData:
  - file: File
  - folder: 'home' | 'inspiration'

Response:
  - url: string (–ø—É–±–ª–∏—á–Ω—ã–π URL —Ñ–∞–π–ª–∞)
```

#### Public (–¥–æ—Å—Ç—É–ø–Ω–æ –≤—Å–µ–º)

**GET /api/content**
–ü–æ–ª—É—á–∏—Ç—å –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
```
Query params:
  - placement: 'home' | 'inspiration'
  - category: string
  - limit: number (default 50)

Returns only status='published'
Cache: 5 minutes
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

### 1. –û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
–ü–µ—Ä–µ–π—Ç–∏ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: `/admin/content`

### 2. –í—ã–±—Ä–∞—Ç—å —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ
- **–ì–ª–∞–≤–Ω–∞—è** ‚Äî –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- **Inspiration** ‚Äî –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ Inspiration

### 3. –°–æ–∑–¥–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É
1. –ù–∞–∂–∞—Ç—å **"–î–æ–±–∞–≤–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç"**
2. –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª—è:
   - **–ù–∞–∑–≤–∞–Ω–∏–µ** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
   - **–ö–∞—Ç–µ–≥–æ—Ä–∏—è** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç** (0-100, —á–µ–º –≤—ã—à–µ ‚Äî —Ç–µ–º —Ä–∞–Ω—å—à–µ)
   - **–¢–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞** (—Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ)
   - **–ú–æ–¥–µ–ª—å** –∏ **–†–µ–∂–∏–º**
   - **–°—Ç–æ–∏–º–æ—Å—Ç—å** (‚≠ê)
3. –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª—ã:
   - **–û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª** (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–ª–∏ –≤–∏–¥–µ–æ)
   - **–ü—Ä–µ–≤—å—é** (–ø–ª–∏—Ç–∫–∞ –¥–ª—è –≥–∞–ª–µ—Ä–µ–∏)
   - **–ü–æ—Å—Ç–µ—Ä** (–¥–ª—è –≤–∏–¥–µ–æ, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
4. –ù–∞–ø–∏—Å–∞—Ç—å **–ø—Ä–æ–º–ø—Ç** –∏ **–æ–ø–∏—Å–∞–Ω–∏–µ**
5. –ù–∞–∂–∞—Ç—å:
   - **"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫"** ‚Üí —Å–æ—Ö—Ä–∞–Ω–∏—Ç –±–µ–∑ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
   - **"–†–∞–∑–º–µ—Å—Ç–∏—Ç—å"** ‚Üí —Å—Ä–∞–∑—É –æ–ø—É–±–ª–∏–∫—É–µ—Ç (status='published')

### 4. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ
- –ù–∞–≤–µ–¥–∏—Ç–µ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É ‚Üí –Ω–∞–∂–º–∏—Ç–µ **"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"**
- –ò–∑–º–µ–Ω–∏—Ç–µ –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è
- –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### 5. –£–¥–∞–ª–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É
- –ù–∞–∂–º–∏—Ç–µ –∏–∫–æ–Ω–∫—É **üóëÔ∏è** –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ
- –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —É–¥–∞–ª–µ–Ω–∏–µ

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º

### –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (Home)
–î–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ, –∑–∞–º–µ–Ω–∏—Ç–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π `EFFECT_PRESETS` –Ω–∞ –∑–∞–ø—Ä–æ—Å:

```tsx
const [homeContent, setHomeContent] = useState([]);

useEffect(() => {
  fetch('/api/content?placement=home&limit=20')
    .then(r => r.json())
    .then(data => setHomeContent(data.content || []));
}, []);
```

### Inspiration
–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è Inspiration:

```tsx
fetch('/api/content?placement=inspiration&limit=50')
  .then(r => r.json())
  .then(data => setInspirationContent(data.content || []));
```

### –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö
API `/api/content` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ –∂–µ –ø–æ–ª—è, —á—Ç–æ –∏ `effects_gallery` —Ç–∞–±–ª–∏—Ü–∞, –Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ (`status='published'`).

## –ú–∏–≥—Ä–∞—Ü–∏—è

–§–∞–π–ª: `supabase/migrations/022_extend_effects_gallery_content.sql`

–ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤ Supabase SQL Editor:
1. –û—Ç–∫—Ä—ã—Ç—å Supabase Dashboard
2. SQL Editor ‚Üí New Query
3. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –º–∏–≥—Ä–∞—Ü–∏–∏
4. –í—ã–ø–æ–ª–Ω–∏—Ç—å

## –•—Ä–∞–Ω–∏–ª–∏—â–µ —Ñ–∞–π–ª–æ–≤

–í—Å–µ —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ Supabase Storage:
- **Bucket:** `content`
- **–ü–æ–ª–∏—Ç–∏–∫–∞:** –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø –¥–ª—è —á—Ç–µ–Ω–∏—è
- **–ü—É—Ç—å:** `{placement}/{timestamp}-{random}.{ext}`

–ï—Å–ª–∏ bucket `content` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –æ–Ω –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–µ.

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ê–¥–º–∏–Ω API –∑–∞—â–∏—â—ë–Ω `requireRole("manager")`
- RLS –Ω–∞ `effects_gallery` —Ä–∞–∑—Ä–µ—à–∞–µ—Ç SELECT —Ç–æ–ª—å–∫–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º/–∞–¥–º–∏–Ω–∞–º
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 100 –ú–ë

## FAQ

**Q: –ö–∞–∫ –ø–æ–º–µ–Ω—è—Ç—å –ø–æ—Ä—è–¥–æ–∫ –∫–∞—Ä—Ç–æ—á–µ–∫?**
A: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª–µ **Priority** (0-100). –ö–∞—Ä—Ç–æ—á–∫–∏ —Å –≤—ã—Å–æ–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–µ—Ä–≤—ã–º–∏.

**Q: –ú–æ–∂–Ω–æ –ª–∏ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –æ–¥–Ω—É –∫–∞—Ä—Ç–æ—á–∫—É –∏ –Ω–∞ Home, –∏ –≤ Inspiration?**
A: –ù–µ—Ç, `placement` –º–æ–∂–µ—Ç –±—ã—Ç—å –ª–∏–±–æ `'home'`, –ª–∏–±–æ `'inspiration'`. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤ –æ–±–∞ –º–µ—Å—Ç–∞ ‚Äî —Å–æ–∑–¥–∞–π—Ç–µ –¥–≤–µ –∫–∞—Ä—Ç–æ—á–∫–∏.

**Q: –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫ –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π?**
A: –í –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ (`/admin/content`) —á–µ—Ä–Ω–æ–≤–∏–∫–∏ –≤–∏–¥–Ω—ã –≤—Å–µ–≥–¥–∞. –ü—É–±–ª–∏—á–Ω—ã–π API (`/api/content`) –≤–µ—Ä–Ω—ë—Ç –∫–∞—Ä—Ç–æ—á–∫—É —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è "–†–∞–∑–º–µ—Å—Ç–∏—Ç—å".

**Q: –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?**
A: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ Supabase –µ—Å—Ç—å bucket `content` —Å –ø—É–±–ª–∏—á–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º. –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî —Å–æ–∑–¥–∞–π—Ç–µ –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–≤—É—é –∑–∞–≥—Ä—É–∑–∫—É (bucket —Å–æ–∑–¥–∞—Å—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).

## –°—Ç–∞—Ç—É—Å

‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞: `022_extend_effects_gallery_content.sql`  
‚úÖ Admin API –æ–±–Ω–æ–≤–ª—ë–Ω: `/api/admin/gallery`, `/api/admin/content/upload`  
‚úÖ Public API —Å–æ–∑–¥–∞–Ω: `/api/content`  
‚úÖ Admin UI –æ–±–Ω–æ–≤–ª—ë–Ω: `/admin/content` (—Ç–∞–±—ã Home/Inspiration)  
‚è≥ Frontend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è: —Ç—Ä–µ–±—É–µ—Ç –∑–∞–º–µ–Ω—ã —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–∞ API –∑–∞–ø—Ä–æ—Å—ã (—Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥)

---

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ
