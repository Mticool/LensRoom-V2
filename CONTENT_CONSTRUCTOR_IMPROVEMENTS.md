# ๐จ ะฃะปัััะตะฝะธั ะบะพะฝัะตะฝั-ะบะพะฝััััะบัะพัะฐ ะธ ะณะตะฝะตัะฐัะพัะฐ

**ะะฐัะฐ:** 22 ะดะตะบะฐะฑัั 2024  
**ะกัะฐััั:** โ ะะพัะพะฒะพ ะบ ัะตััะธัะพะฒะฐะฝะธั

---

## ๐ ะกะพะดะตัะถะฐะฝะธะต

1. [ะะฑะทะพั ะธะทะผะตะฝะตะฝะธะน](#ะพะฑะทะพั-ะธะทะผะตะฝะตะฝะธะน)
2. [ะฃะปัััะตะฝะฝัะน ะณะตะฝะตัะฐัะพั ะบะพะฝัะตะฝัะฐ](#ัะปัััะตะฝะฝัะน-ะณะตะฝะตัะฐัะพั-ะบะพะฝัะตะฝัะฐ)
3. [ะกะธััะตะผะฐ API ะบะปััะตะน](#ัะธััะตะผะฐ-api-ะบะปััะตะน)
4. [ะััะธัะตะบัััะฐ ะบะพะฝัะตะฝั-ะบะพะฝััััะบัะพัะฐ](#ะฐััะธัะตะบัััะฐ-ะบะพะฝัะตะฝั-ะบะพะฝััััะบัะพัะฐ)
5. [ะะฐะบ ะธัะฟะพะปัะทะพะฒะฐัั](#ะบะฐะบ-ะธัะฟะพะปัะทะพะฒะฐัั)
6. [ะขะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ](#ัะตัะฝะธัะตัะบะธะต-ะดะตัะฐะปะธ)

---

## ๐ฏ ะะฑะทะพั ะธะทะผะตะฝะตะฝะธะน

### โจ ะงัะพ ะฝะพะฒะพะณะพ:

1. **ะะฒัะพัะพััะฐะฝะตะฝะธะต ะฒ ะณะฐะปะตัะตั**
   - ะะตะทัะปััะฐัั ะณะตะฝะตัะฐัะธะธ ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะพััะฐะฝััััั ะฒ `effects_gallery`
   - ะะพะปััะต ะฝะต ะฝัะถะฝะพ ะฒัััะฝัั ะดะพะฑะฐะฒะปััั ะบะฐะถะดัั ะบะฐััะพัะบั

2. **ะัะฑะพั ัะฐะทะผะตัะตะฝะธั**
   - ะะปะฐะฒะฝะฐั ัััะฐะฝะธัะฐ (`home`)
   - ะะฐะทะดะตะป "ะะดะพัะฝะพะฒะตะฝะธะต" (`inspiration`)
   - ะะฐัััะฐะธะฒะฐะตััั ะฟะตัะตะด ะณะตะฝะตัะฐัะธะตะน

3. **ะะฐัะตะณะพัะธะธ ะบะพะฝัะตะฝัะฐ**
   - ะะพะฑะฐะฒะปะตะฝะฐ ะฟะพะดะดะตัะถะบะฐ ะบะฐัะตะณะพัะธะน
   - ะะตะณะบะฐั ัะธะปัััะฐัะธั ะธ ะพัะณะฐะฝะธะทะฐัะธั

4. **ะะตััะพะฝะฐะปัะฝัะต API ะบะปััะธ**
   - Midjourney ัะตัะตะท KIE.ai
   - ะฅัะฐะฝะตะฝะธะต ะฒ ะทะฐัะธััะพะฒะฐะฝะฝะพะผ ะฒะธะดะต
   - ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะฑะตะท ะปะธะผะธัะพะฒ

5. **ะะฒัะพะพะฟัะตะดะตะปะตะฝะธะต ะฟะฐัะฐะผะตััะพะฒ**
   - ะะพะดะตะปั, ัะธะฟ ะบะพะฝัะตะฝัะฐ, ััะพะธะผะพััั
   - ะะฒัะพะผะฐัะธัะตัะบะธ ะทะฐะฟะพะปะฝััััั ะธะท ะบะพะฝัะธะณะฐ

---

## ๐ ะฃะปัััะตะฝะฝัะน ะณะตะฝะตัะฐัะพั ะบะพะฝัะตะฝัะฐ

### ะััั: `/admin/generator`

### ะะพะฒัะต ะฒะพะทะผะพะถะฝะพััะธ:

#### 1. **ะัะฑะพั ัะฐะทะผะตัะตะฝะธั**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ะะฐะทะผะตัะตะฝะธะต                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ [ะะปะฐะฒะฝะฐั] [Inspiration]         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

- **ะะปะฐะฒะฝะฐั** - ะบะพะฝัะตะฝั ะดะปั ะณะปะฐะฒะฝะพะน ัััะฐะฝะธัั
- **Inspiration** - ะบะพะฝัะตะฝั ะดะปั ัะฐะทะดะตะปะฐ ะฒะดะพัะฝะพะฒะตะฝะธั
- ะัะฑะธัะฐะตััั ะพะดะธะฝ ัะฐะท ะฟะตัะตะด ะณะตะฝะตัะฐัะธะตะน

#### 2. **ะะฐัะตะณะพัะธะธ**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ะะฐัะตะณะพัะธั (ะพะฟัะธะพะฝะฐะปัะฝะพ)         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ [ะะพัััะตัั, ะะตะนะทะฐะถะธ, ะัะพะดัะบัั...] โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

- ะกะฒะพะฑะพะดะฝัะน ัะตะบัั
- ะะพะผะพะณะฐะตั ะฒ ะพัะณะฐะฝะธะทะฐัะธะธ ะบะพะฝัะตะฝัะฐ
- ะคะธะปัััะฐัะธั ะฒ ะฐะดะผะธะฝะบะต

#### 3. **ะะฒัะพัะพััะฐะฝะตะฝะธะต**
```
โ ะะฒัะพะผะฐัะธัะตัะบะธ ัะพััะฐะฝััั ะฒ ะณะฐะปะตัะตั ะฟะพัะปะต ะณะตะฝะตัะฐัะธะธ
```

- **ะะบะปััะตะฝะพ** โ ะฐะฒัะพัะพััะฐะฝะตะฝะธะต ะฒ ะฒัะฑัะฐะฝะฝะพะต ัะฐะทะผะตัะตะฝะธะต
- **ะัะบะปััะตะฝะพ** โ ัััะฝะพะต ัะพััะฐะฝะตะฝะธะต ั ะฒัะฑะพัะพะผ ะผะตััะฐ

#### 4. **ะฃะผะฝัะต ะดะตะนััะฒะธั ะดะปั ัะตะทัะปััะฐัะพะฒ**

**ะัะปะธ ะฐะฒัะพัะพััะฐะฝะตะฝะธะต ะฒะบะปััะตะฝะพ:**
```
โ ะกะพััะฐะฝะตะฝะพ ะฒ ะะปะฐะฒะฝัั
[ะกะบะฐัะฐัั]
```

**ะัะปะธ ะฐะฒัะพัะพััะฐะฝะตะฝะธะต ะฒัะบะปััะตะฝะพ:**
```
[ะะฐ ะณะปะฐะฒะฝัั] [ะ Inspiration] [ะกะบะฐัะฐัั]
```

### Workflow ะณะตะฝะตัะฐัะธะธ:

```
1. ะัะฑัะฐัั ัะธะฟ (ัะพัะพ/ะฒะธะดะตะพ)
2. ะัะฑัะฐัั ะผะพะดะตะปั
3. ะัะฑัะฐัั ัะพะพัะฝะพัะตะฝะธะต ััะพัะพะฝ
4. ะัะฑัะฐัั ัะฐะทะผะตัะตะฝะธะต (ะะปะฐะฒะฝะฐั/Inspiration)
5. ะะพะฑะฐะฒะธัั ะบะฐัะตะณะพัะธั (ะพะฟัะธะพะฝะฐะปัะฝะพ)
6. ะะบะปััะธัั ะฐะฒัะพัะพััะฐะฝะตะฝะธะต โ
7. ะะพะฑะฐะฒะธัั ะฟัะพะผะฟัั
8. [ะกะพะทะดะฐัั ะทะฐะดะฐัะธ]
9. [ะะฐะฟัััะธัั]
   โ
   ะะตะฝะตัะฐัะธั โ ะะฒัะพัะพััะฐะฝะตะฝะธะต โ ะะพัะพะฒะพ!
```

---

## ๐ ะกะธััะตะผะฐ API ะบะปััะตะน

### ะััั: `/profile/api-keys`

### ะะฐัะตะผ ะฝัะถะฝะพ?

- ะัะฟะพะปัะทะพะฒะฐะฝะธะต Midjourney **ะฑะตะท ะปะธะผะธัะพะฒ**
- ะะฐั API ะบะปัั = ะฒะฐัะธ ะณะตะฝะตัะฐัะธะธ
- ะะต ััะฐัะธัะต ะทะฒัะทะดั LensRoom ะฝะฐ Midjourney

### ะะพะดะดะตัะถะธะฒะฐะตะผัะต ัะตัะฒะธัั:

#### 1. **Midjourney (ัะตัะตะท KIE.ai)**
- ะะพะปััะธัะต ะบะปัั: https://kie.ai/docs/api-keys
- ะะพะฑะฐะฒััะต ะฒ LensRoom
- ะะตะฝะตัะธััะนัะต ะฑะตะท ะพะณัะฐะฝะธัะตะฝะธะน

**ะคะพัะผะฐั ะบะปััะฐ:** `kie_xxxxxxxxxxxxxxxxxxxx`

### ะะฐะบ ััะพ ัะฐะฑะพัะฐะตั:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 1. ะะพะปััะธัะต API ะบะปัั ะฝะฐ ัะฐะนัะต KIE.ai                 โ
โ    โ https://kie.ai                                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 2. ะะพะฑะฐะฒััะต ะบะปัั ะฒ LensRoom                          โ
โ    โ /profile/api-keys โ [ะะพะฑะฐะฒะธัั API ะบะปัั]         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 3. ะัะฟะพะปัะทัะนัะต Midjourney ะฒ ะณะตะฝะตัะฐัะพัะต               โ
โ    โ ะกะธััะตะผะฐ ะฐะฒัะพะผะฐัะธัะตัะบะธ ะธัะฟะพะปัะทัะตั ะฒะฐั ะบะปัั       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ะะตะทะพะฟะฐัะฝะพััั:

โ **ะะฐัะธััะพะฒะฐะฝะฝะพะต ััะฐะฝะตะฝะธะต**
- ะะปััะธ ัะธััััััั ะฟะตัะตะด ัะพััะฐะฝะตะฝะธะตะผ
- ะะพะบะฐะทัะฒะฐัััั ัะพะปัะบะพ ะฟะพัะปะตะดะฝะธะต 4 ัะธะผะฒะพะปะฐ

โ **ะะพัััะฟ ัะพะปัะบะพ ะบ ัะฒะพะธะผ ะบะปััะฐะผ**
- RLS ะฟะพะปะธัะธะบะธ Supabase
- ะะฐะถะดัะน ะฟะพะปัะทะพะฒะฐัะตะปั ะฒะธะดะธั ัะพะปัะบะพ ัะฒะพะธ ะบะปััะธ

โ **ะฃะฟัะฐะฒะปะตะฝะธะต ััะฐัััะพะผ**
- ะะบัะธะฒะธัะพะฒะฐัั/ะะตะฐะบัะธะฒะธัะพะฒะฐัั
- ะฃะดะฐะปะธัั ะฒ ะปัะฑะพะน ะผะพะผะตะฝั

---

## ๐๏ธ ะััะธัะตะบัััะฐ ะบะพะฝัะตะฝั-ะบะพะฝััััะบัะพัะฐ

### ะะฐะทะฐ ะดะฐะฝะฝัั: `effects_gallery`

#### ะัะฝะพะฒะฝัะต ะฟะพะปั:
```sql
- id (uuid)
- preset_id (text) - ัะฝะธะบะฐะปัะฝัะน ะธะดะตะฝัะธัะธะบะฐัะพั
- title (text) - ะฝะฐะทะฒะฐะฝะธะต ะบะฐััะพัะบะธ
- content_type ('photo' | 'video')
- model_key (text) - ID ะผะพะดะตะปะธ
- tile_ratio ('1:1' | '9:16' | '16:9')
- cost_stars (int) - ััะพะธะผะพััั ะฒ ะทะฒัะทะดะฐั
- mode (text) - t2i, i2i, t2v, i2v
- variant_id (text) - ะฒะฐัะธะฐะฝั ะผะพะดะตะปะธ
- preview_image (text) - URL ะฟัะตะฒัั
- preview_url (text) - URL ัะธะฝะฐะปัะฝะพะณะพ ะบะพะฝัะตะฝัะฐ
- template_prompt (text) - ะฟัะพะผะฟั
- featured (boolean) - ะธะทะฑัะฐะฝะฝะพะต
- published (boolean) - legacy ะฟะพะปะต
```

#### ะะพะฒัะต ะฟะพะปั ะดะปั ะบะพะฝัะตะฝั-ะบะพะฝััััะบัะพัะฐ:
```sql
- placement ('home' | 'inspiration') - ัะฐะทะผะตัะตะฝะธะต
- status ('draft' | 'published') - ััะฐััั
- category (text) - ะบะฐัะตะณะพัะธั
- priority (int) - ะฟัะธะพัะธัะตั ัะพััะธัะพะฒะบะธ
- type ('image' | 'video') - ัะธะฟ ะบะพะฝัะตะฝัะฐ
- asset_url (text) - URL ะฐะบัะธะฒะฐ
- poster_url (text) - URL ะฟะพััะตัะฐ ะดะปั ะฒะธะดะตะพ
- aspect ('1:1' | '9:16' | '16:9') - ัะพะพัะฝะพัะตะฝะธะต ััะพัะพะฝ
- short_description (text) - ะบะพัะพัะบะพะต ะพะฟะธัะฐะฝะธะต
```

#### ะะฝะดะตะบัั:
```sql
- placement_idx โ ะฑัััััะน ะฟะพะธัะบ ะฟะพ ัะฐะทะผะตัะตะฝะธั
- status_idx โ ัะธะปััั ะฟะพ ััะฐัััั
- category_idx โ ัะธะปััั ะฟะพ ะบะฐัะตะณะพัะธะธ
- priority_idx โ ัะพััะธัะพะฒะบะฐ ะฟะพ ะฟัะธะพัะธัะตัั
```

### ะะฐะทะฐ ะดะฐะฝะฝัั: `user_api_keys` (NEW)

#### ะกัััะบัััะฐ:
```sql
create table user_api_keys (
  id uuid primary key,
  user_id uuid references auth.users(id),
  service text ('midjourney' | 'openai' | 'anthropic' | 'replicate'),
  api_key_encrypted text,
  api_key_last_4 text,
  is_active boolean,
  settings jsonb,
  usage_stats jsonb,
  created_at timestamptz,
  updated_at timestamptz,
  last_used_at timestamptz
);
```

#### RLS ะฟะพะปะธัะธะบะธ:
```sql
- user_api_keys_select_own โ ะะพะปัะทะพะฒะฐัะตะปั ะฒะธะดะธั ัะพะปัะบะพ ัะฒะพะธ ะบะปััะธ
- user_api_keys_insert_own โ ะะพะปัะทะพะฒะฐัะตะปั ัะพะทะดะฐัั ัะพะปัะบะพ ัะฒะพะธ ะบะปััะธ
- user_api_keys_update_own โ ะะพะปัะทะพะฒะฐัะตะปั ะพะฑะฝะพะฒะปัะตั ัะพะปัะบะพ ัะฒะพะธ ะบะปััะธ
- user_api_keys_delete_own โ ะะพะปัะทะพะฒะฐัะตะปั ัะดะฐะปัะตั ัะพะปัะบะพ ัะฒะพะธ ะบะปััะธ
- user_api_keys_admin_select โ ะะดะผะธะฝ ะฒะธะดะธั ะฒัะต ะบะปััะธ (ะฝะพ ะฝะต ัะฐััะธััะพะฒัะฒะฐะตั)
```

---

## ๐ฑ ะะฐะบ ะธัะฟะพะปัะทะพะฒะฐัั

### ะกัะตะฝะฐัะธะน 1: ะะฐะฟะพะปะฝะตะฝะธะต ะณะปะฐะฒะฝะพะน ัััะฐะฝะธัั

1. ะัะบัะพะนัะต `/admin/generator`
2. ะัะฑะตัะธัะต **ะคะพัะพ** ะธะปะธ **ะะธะดะตะพ**
3. ะัะฑะตัะธัะต ะผะพะดะตะปั (ะฝะฐะฟัะธะผะตั, **Nano Banana Pro**)
4. ะกะพะพัะฝะพัะตะฝะธะต ััะพัะพะฝ: **1:1**
5. ะะฐะทะผะตัะตะฝะธะต: **ะะปะฐะฒะฝะฐั**
6. ะะฐัะตะณะพัะธั: `ะะพัััะตัั`
7. ะะบะปััะธัะต **ะฐะฒัะพัะพััะฐะฝะตะฝะธะต** โ
8. ะะพะฑะฐะฒััะต ะฟัะพะผะฟัั:
   ```
   Professional portrait, studio lighting, cinematic
   Fashion portrait, high-end magazine style
   Artistic portrait with dramatic lighting
   ```
9. [ะกะพะทะดะฐัั ะทะฐะดะฐัะธ] โ [ะะฐะฟัััะธัั]
10. ะะตะทัะปััะฐัั ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะพััะฐะฝัััั ะฝะฐ ะณะปะฐะฒะฝะพะน ัััะฐะฝะธัะต!

### ะกัะตะฝะฐัะธะน 2: ะะฐะฟะพะปะฝะตะฝะธะต ัะฐะทะดะตะปะฐ "ะะดะพัะฝะพะฒะตะฝะธะต"

1. ะัะบัะพะนัะต `/admin/generator`
2. ะัะฑะตัะธัะต **ะะธะดะตะพ**
3. ะะพะดะตะปั: **Sora 2**
4. ะกะพะพัะฝะพัะตะฝะธะต: **9:16**
5. ะะฐะทะผะตัะตะฝะธะต: **Inspiration**
6. ะะฐัะตะณะพัะธั: `ะะธะฝะตะผะฐัะพะณัะฐั`
7. ะะฒัะพัะพััะฐะฝะตะฝะธะต โ
8. ะัะพะผะฟัั:
   ```
   Cinematic drone shot of mountains at sunrise
   Dynamic city timelapse, neon lights
   Epic space travel scene, stars and galaxies
   ```
9. ะะฐะฟัััะธัะต ะณะตะฝะตัะฐัะธั โ ะะฒัะพัะพััะฐะฝะตะฝะธะต ะฒ Inspiration!

### ะกัะตะฝะฐัะธะน 3: ะะพะดะบะปััะตะฝะธะต Midjourney

1. ะะพะปััะธัะต API ะบะปัั KIE.ai:
   - ะะตัะตะนะดะธัะต ะฝะฐ https://kie.ai
   - ะะฐัะตะณะธัััะธััะนัะตัั/ะะพะนะดะธัะต
   - ะกะพะทะดะฐะนัะต API ะบะปัั
   - ะกะบะพะฟะธััะนัะต ะบะปัั (ัะพัะผะฐั: `kie_...`)

2. ะะพะฑะฐะฒััะต ะบะปัั ะฒ LensRoom:
   - ะัะบัะพะนัะต ะฟัะพัะธะปั โ **API ะบะปััะธ**
   - ะะฐะนะดะธัะต **Midjourney (via KIE.ai)**
   - [ะะพะฑะฐะฒะธัั API ะบะปัั]
   - ะััะฐะฒััะต ะฒะฐั ะบะปัั
   - [ะกะพััะฐะฝะธัั]

3. ะัะฟะพะปัะทัะนัะต ะฒ ะณะตะฝะตัะฐัะพัะต:
   - ะัะฑะตัะธัะต ะผะพะดะตะปั **Midjourney V7**
   - ะกะธััะตะผะฐ ะฐะฒัะพะผะฐัะธัะตัะบะธ ะธัะฟะพะปัะทัะตั ะฒะฐั ะบะปัั
   - ะะตะฝะตัะธััะนัะต ะฑะตะท ะปะธะผะธัะพะฒ! ๐

---

## ๐ง ะขะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ

### ะคะฐะนะปั ะธะทะผะตะฝะตะฝั:

#### 1. **ะะตะฝะตัะฐัะพั** (`src/app/admin/generator/page.tsx`)

**ะะพะฑะฐะฒะปะตะฝั state:**
```typescript
const [placement, setPlacement] = useState<"home" | "inspiration">("home");
const [autoSaveToGallery, setAutoSaveToGallery] = useState(true);
const [category, setCategory] = useState("");
```

**ะะพะฒะฐั ััะฝะบัะธั `saveToGallery`:**
```typescript
const saveToGallery = async (task, customPlacement?) => {
  const modelInfo = getModelById(task.model);
  
  const galleryData = {
    presetId: `gen-${Date.now()}-...`,
    title: task.prompt.slice(0, 100),
    contentType: task.type,
    modelKey: task.model,
    costStars: modelInfo?.pricing || 0,
    placement: customPlacement || placement,
    status: "draft",
    category: category || "",
    // ... + ะฒัะต ะฝะพะฒัะต ะฟะพะปั
  };

  await fetch("/api/admin/gallery", {
    method: "POST",
    body: JSON.stringify(galleryData),
  });
};
```

**ะะฒัะพัะพััะฐะฝะตะฝะธะต ะฟะพัะปะต ะณะตะฝะตัะฐัะธะธ:**
```typescript
if (statusData.status === "completed") {
  const resultUrl = statusData.results[0].url;
  setTasks(prev => ...);
  
  // ะะฒัะพัะพััะฐะฝะตะฝะธะต
  if (autoSaveToGallery) {
    await saveToGallery({ ...task, resultUrl });
  }
}
```

#### 2. **API ะบะปััะธ** (`src/app/profile/api-keys/page.tsx`)

**ะะพะผะฟะพะฝะตะฝัั:**
- ะกะฟะธัะพะบ ัะตัะฒะธัะพะฒ
- ะคะพัะผะฐ ะดะพะฑะฐะฒะปะตะฝะธั ะบะปััะฐ
- ะฃะฟัะฐะฒะปะตะฝะธะต ััะฐัััะพะผ (ะฐะบัะธะฒะฐัะธั/ะดะตะฐะบัะธะฒะฐัะธั)
- ะฃะดะฐะปะตะฝะธะต ะบะปััะฐ

**API ะธะฝัะตะณัะฐัะธั:**
```typescript
// ะะฐะณััะทะบะฐ ะบะปััะตะน
const { data } = await supabase
  .from("user_api_keys")
  .select("*");

// ะะพะฑะฐะฒะปะตะฝะธะต ะบะปััะฐ
await supabase
  .from("user_api_keys")
  .upsert({
    service: "midjourney",
    api_key_encrypted: newKey,
    api_key_last_4: newKey.slice(-4),
    is_active: true,
  });
```

#### 3. **ะะธะณัะฐัะธั ะะ** (`supabase/migrations/035_user_api_keys.sql`)

- ะกะพะทะดะฐะฝะธะต ัะฐะฑะปะธัั `user_api_keys`
- ะะฝะดะตะบัั ะดะปั ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ
- RLS ะฟะพะปะธัะธะบะธ ะดะปั ะฑะตะทะพะฟะฐัะฝะพััะธ
- ะขัะธะณะณะตั `updated_at`

#### 4. **ะัะพัะธะปั** (`src/app/profile/page.tsx`)

**ะะพะฑะฐะฒะปะตะฝะฐ ัััะปะบะฐ ะฝะฐ API ะบะปััะธ:**
```tsx
<Link href="/profile/api-keys">
  <div className="flex items-center gap-3 p-3 rounded-lg bg-[var(--surface2)] hover:bg-[var(--border)] transition-colors cursor-pointer group">
    <Key className="w-5 h-5 text-[var(--muted)] group-hover:text-[var(--gold)]" />
    <div className="flex-1">
      <p className="text-sm text-[var(--text)] font-medium">API ะบะปััะธ</p>
      <p className="text-xs text-[var(--muted)]">Midjourney ะธ ะดั.</p>
    </div>
    <ExternalLink className="w-4 h-4 text-[var(--muted)] group-hover:text-[var(--gold)]" />
  </div>
</Link>
```

---

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต

### Checklist:

#### ะะตะฝะตัะฐัะพั:
- [ ] ะัะฑะพั ัะฐะทะผะตัะตะฝะธั (ะะปะฐะฒะฝะฐั/Inspiration) ัะฐะฑะพัะฐะตั
- [ ] ะะฐัะตะณะพัะธั ัะพััะฐะฝัะตััั ะบะพััะตะบัะฝะพ
- [ ] ะะฒัะพัะพััะฐะฝะตะฝะธะต ัะฐะฑะพัะฐะตั
- [ ] ะััะฝะพะต ัะพััะฐะฝะตะฝะธะต ั ะฒัะฑะพัะพะผ ะผะตััะฐ ัะฐะฑะพัะฐะตั
- [ ] ะะพะดะตะปั ะธ ััะพะธะผะพััั ะพะฟัะตะดะตะปััััั ะฐะฒัะพะผะฐัะธัะตัะบะธ

#### API ะบะปััะธ:
- [ ] ะกััะฐะฝะธัะฐ `/profile/api-keys` ะพัะบััะฒะฐะตััั
- [ ] ะะพะฑะฐะฒะปะตะฝะธะต ะบะปััะฐ ัะฐะฑะพัะฐะตั
- [ ] ะัะพะฑัะฐะถะตะฝะธะต `****...last4` ะบะพััะตะบัะฝะพะต
- [ ] ะะบัะธะฒะฐัะธั/ะะตะฐะบัะธะฒะฐัะธั ัะฐะฑะพัะฐะตั
- [ ] ะฃะดะฐะปะตะฝะธะต ะบะปััะฐ ัะฐะฑะพัะฐะตั
- [ ] RLS: ะฟะพะปัะทะพะฒะฐัะตะปั ะฒะธะดะธั ัะพะปัะบะพ ัะฒะพะธ ะบะปััะธ

#### ะะฝัะตะณัะฐัะธั:
- [ ] Midjourney ะธัะฟะพะปัะทัะตั ะฟะตััะพะฝะฐะปัะฝัะน ะบะปัั ะตัะปะธ ะตััั
- [ ] Fallback ะฝะฐ ัะธััะตะผะฝัะน ะบะปัั ะตัะปะธ ะฝะตั
- [ ] ะััะพัะธั ะธัะฟะพะปัะทะพะฒะฐะฝะธั ะพะฑะฝะพะฒะปัะตััั

#### ะะดะผะธะฝะบะฐ ะบะพะฝัะตะฝัะฐ:
- [ ] ะคะธะปััั ะฟะพ `placement` ัะฐะฑะพัะฐะตั
- [ ] ะะบะปะฐะดะบะธ ะะปะฐะฒะฝะฐั/Inspiration ะฟะตัะตะบะปััะฐัััั
- [ ] ะกะพััะธัะพะฒะบะฐ ะฟะพ `priority` ัะฐะฑะพัะฐะตั
- [ ] ะะตะดะฐะบัะธัะพะฒะฐะฝะธะต ะบะฐััะพัะตะบ ัะฐะฑะพัะฐะตั

---

## ๐ ะะตะฟะปะพะน

### ะะพะผะฐะฝะดั:

```bash
# 1. ะัะธะผะตะฝะธัั ะผะธะณัะฐัะธั ะะ
cd lensroom-v2
npx supabase db push

# 2. Build ะฟัะพะตะบัะฐ
npm run build

# 3. ะะตะฟะปะพะน ะฝะฐ production
cd ..
bash DEPLOY_TO_PRODUCTION.sh
```

### ะัะพะฒะตัะบะฐ ะฟะพัะปะต ะดะตะฟะปะพั:

1. **API keys ัััะฐะฝะธัะฐ:**
   ```
   https://lensroom.ru/profile/api-keys
   ```

2. **ะะตะฝะตัะฐัะพั:**
   ```
   https://lensroom.ru/admin/generator
   ```

3. **ะะพะฝัะตะฝั-ะบะพะฝััััะบัะพั:**
   ```
   https://lensroom.ru/admin/content
   ```

---

## ๐ ะกัะฐัะธััะธะบะฐ ัะปัััะตะฝะธะน

### ะะพ:
- โ ะััะฝะพะต ัะพะทะดะฐะฝะธะต ะบะฐะถะดะพะน ะบะฐััะพัะบะธ
- โ ะะตั ะฒัะฑะพัะฐ ัะฐะทะผะตัะตะฝะธั
- โ ะะตั ะบะฐัะตะณะพัะธะน
- โ ะะตะปัะทั ะธัะฟะพะปัะทะพะฒะฐัั ัะฒะพะน Midjourney
- โ๏ธ ะะฝะพะณะพ ัััะฝะพะน ัะฐะฑะพัั

### ะะพัะปะต:
- โ ะะฒัะพัะพััะฐะฝะตะฝะธะต ะฒ ะณะฐะปะตัะตั
- โ ะัะฑะพั ัะฐะทะผะตัะตะฝะธั (ะะปะฐะฒะฝะฐั/Inspiration)
- โ ะะฐัะตะณะพัะธะธ ะดะปั ะพัะณะฐะฝะธะทะฐัะธะธ
- โ ะะตััะพะฝะฐะปัะฝัะต API ะบะปััะธ
- โ Midjourney ะฑะตะท ะปะธะผะธัะพะฒ
- โ ะััััะพะต ะทะฐะฟะพะปะฝะตะฝะธะต ะบะพะฝัะตะฝัะฐ

### ะญะบะพะฝะพะผะธั ะฒัะตะผะตะฝะธ:
- **ะะฐะฝััะต:** ~5 ะผะธะฝัั ะฝะฐ ะบะฐััะพัะบั ร 10 ะบะฐััะพัะตะบ = 50 ะผะธะฝัั
- **ะขะตะฟะตัั:** ~1 ะผะธะฝััะฐ ะฝะฐ ะฒัะต 10 ะบะฐััะพัะตะบ
- **ะญะบะพะฝะพะผะธั:** ~49 ะผะธะฝัั (98%)

---

## ๐ ะะฐะบะปััะตะฝะธะต

ะะพะฝัะตะฝั-ะบะพะฝััััะบัะพั ัะตะฟะตัั **ะฟะพะปะฝะพัะตะฝะฝัะน ะธะฝััััะผะตะฝั** ะดะปั ะฑััััะพะณะพ ะทะฐะฟะพะปะฝะตะฝะธั ะบะพะฝัะตะฝัะฐ:

1. โ ะะฐะบะตัะฝะฐั ะณะตะฝะตัะฐัะธั ั ะฐะฒัะพัะพััะฐะฝะตะฝะธะตะผ
2. โ ะฃะผะฝัะน ะฒัะฑะพั ัะฐะทะผะตัะตะฝะธั
3. โ ะะฐัะตะณะพัะธะทะฐัะธั ะบะพะฝัะตะฝัะฐ
4. โ ะะตััะพะฝะฐะปัะฝัะต API ะบะปััะธ
5. โ Midjourney ะธะฝัะตะณัะฐัะธั

**ะัั ะณะพัะพะฒะพ ะบ ะธัะฟะพะปัะทะพะฒะฐะฝะธั!** ๐

---

**ะกะปะตะดัััะธะต ัะฐะณะธ:**
1. ะัะธะผะตะฝะธัั ะผะธะณัะฐัะธั ะะ
2. ะกะพะฑัะฐัั ะธ ะทะฐะดะตะฟะปะพะธัั
3. ะัะพัะตััะธัะพะฒะฐัั ะฒัะต ััะฝะบัะธะธ
4. ะะฐะฟะพะปะฝะธัั ะบะพะฝัะตะฝัะพะผ ะณะปะฐะฒะฝัั ะธ inspiration
5. ะะพะดะบะปััะธัั Midjourney API

**ะะฐัะฐ ัะพะทะดะฐะฝะธั:** 22 ะดะตะบะฐะฑัั 2024  
**ะะฒัะพั:** LensRoom AI Team
