# Troubleshooting - Раздел фото не доступен

## Проблема
Пользователь сообщил: "раздел фото вообще не доступен на сайте"

## Диагностика

### 1. Статус сервера
✅ Сервер работает: PM2 online  
✅ Страница отвечает: HTTP 200  
✅ Build успешен: No compilation errors

### 2. BAILOUT_TO_CLIENT_SIDE_RENDERING
⚠️ Обе страницы (`/create` и `/create/video`) показывают `BAILOUT_TO_CLIENT_SIDE_RENDERING`

**Это НЕ ошибка!** Это нормальное поведение для:
- Страниц с `"use client"` директивой
- Компонентов внутри `<Suspense>`
- Компонентов использующих хуки (`useState`, `useEffect` и т.д.)

### 3. Возможные причины недоступности

#### A. Устаревший кэш браузера
После деплоя браузер может использовать старые JS файлы.

**Решение:**
1. Открой DevTools (F12)
2. Правый клик на кнопке обновления
3. Выбери "Очистить кэш и жёстко перезагрузить"

Или:
- Chrome/Edge: `Ctrl+Shift+R` (Windows) / `Cmd+Shift+R` (Mac)
- Firefox: `Ctrl+F5` (Windows) / `Cmd+Shift+R` (Mac)

#### B. localStorage конфликт
Zustand store использует localStorage для сохранения истории. Старые данные могут конфликтовать с новой структурой.

**Решение:**
1. Открой DevTools (F12) → Console
2. Выполни:
```javascript
localStorage.clear();
location.reload();
```

#### C. JavaScript ошибка
Может быть ошибка в консоли которая блокирует загрузку.

**Диагностика:**
1. Открой DevTools (F12) → Console
2. Проверь наличие красных ошибок
3. Скопируй текст ошибки если есть

#### D. Сеть/прокси
Возможно, блокируется загрузка JS файлов.

**Диагностика:**
1. DevTools (F12) → Network
2. Перезагрузи страницу
3. Проверь что все файлы загрузились (зелёный статус 200)

---

## Быстрая проверка

### Что должно работать:
1. Открой https://lensroom.ru/create
2. Должна появиться шапка сайта (Header)
3. Слева - боковая панель с моделями (Nano Banana, Imagen 4, FLUX.2 Pro...)
4. Справа - поля для ввода промпта
5. Внизу - футер сайта

### Если видишь только лоадер:
1. Жди 3-5 секунд (страница загружается на клиенте)
2. Если не загрузилась - смотри консоль (F12 → Console)
3. Если есть ошибки - скопируй и отправь

---

## Для разработчика

### Проверка логов сервера:
```bash
ssh root@104.222.177.29
pm2 logs lensroom --lines 50
```

### Проверка состояния:
```bash
pm2 status
pm2 describe lensroom
```

### Пересборка с нуля:
```bash
cd /root/lensroom/frontend
pm2 stop lensroom
rm -rf .next node_modules/.cache
npm run build
pm2 start lensroom
```

### Проверка доступности API:
```bash
curl https://lensroom.ru/api/health
```

---

## Последние изменения

1. ✅ Добавлены модальные окна для истории (фото/видео)
2. ✅ Парсинг `result_urls` из БД
3. ✅ Индикаторы статуса на превью
4. ✅ Кнопки: Скачать, Поделиться, Референс

**Файлы изменены:**
- `src/app/create/page.tsx`
- `src/app/create/video/page.tsx`

**Изменения безопасны:** только добавление UI элементов, без изменения логики генерации.

---

## Контрольный список

- [ ] Очистил кэш браузера (Ctrl+Shift+R)
- [ ] Очистил localStorage
- [ ] Проверил консоль на ошибки
- [ ] Проверил Network tab на загрузку файлов
- [ ] Попробовал в инкогнито режиме
- [ ] Попробовал другой браузер

---

**Обновлено**: 15 декабря 2025, 21:00  
**Статус**: Ожидание уточнения от пользователя
