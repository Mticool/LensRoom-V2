# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Lip Sync (Kling AI Avatar + InfiniteTalk)

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. Backend

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã 3 –º–æ–¥–µ–ª–∏ lip sync –≤ `src/config/models.ts`:
  - `kling-ai-avatar` - —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ü–µ–Ω–∞ 50‚≠ê
  - `infinitalk-480p` - 3‚≠ê/—Å–µ–∫
  - `infinitalk-720p` - 12‚≠ê/—Å–µ–∫

#### Pricing —Å–∏—Å—Ç–µ–º–∞
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã SKU –≤ `src/lib/pricing/pricing.ts`:
  - `kling_ai_avatar:standard` ‚Üí 50‚≠ê
  - `infinitalk_480p:per_sec` ‚Üí 3‚≠ê/—Å–µ–∫
  - `infinitalk_720p:per_sec` ‚Üí 12‚≠ê/—Å–µ–∫

#### KIE API Client
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `LipSyncParams` –≤ `src/lib/api/kie-client.ts`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `lipSyncVideo()` –¥–ª—è –≤—ã–∑–æ–≤–∞ KIE API

#### API Routes
- ‚úÖ `POST /api/upload/voice-assets` - –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –∞—É–¥–∏–æ
  - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞ (10MB –¥–ª—è —Ñ–æ—Ç–æ, 20MB –¥–ª—è –∞—É–¥–∏–æ)
  - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ (JPG/PNG/WEBP –¥–ª—è —Ñ–æ—Ç–æ, MP3/WAV/WEBM –¥–ª—è –∞—É–¥–∏–æ)
  - –ó–∞–≥—Ä—É–∑–∫–∞ –≤ Supabase Storage

- ‚úÖ `POST /api/generate/lipsync` - –∑–∞–ø—É—Å–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∞—É–¥–∏–æ –¥–ª—è InfiniteTalk (–º–∞–∫—Å 15 —Å–µ–∫)
  - –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∏ —Å–ø–∏—Å–∞–Ω–∏–µ –∫—Ä–µ–¥–∏—Ç–æ–≤
  - –í—ã–∑–æ–≤ KIE API —á–µ—Ä–µ–∑ `lipSyncVideo()`
  - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î —Å task_id –¥–ª—è tracking

#### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π webhook `/api/webhooks/kie` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç lip sync –∑–∞–¥–∞—á–∏
- ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π `syncKieTaskToDb` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (type="video")

#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è `supabase/migrations/20260129_lipsync_support.sql`:
  - `section` VARCHAR(50) - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å–µ–∫—Ü–∏–∏
  - `image_url` TEXT - URL –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
  - `audio_url` TEXT - URL –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∞—É–¥–∏–æ
  - `audio_duration` FLOAT - –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
  - `resolution` VARCHAR(20) - —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –≤–∏–¥–µ–æ
  - –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞

### 2. Frontend

#### –ù–∞–≤–∏–≥–∞—Ü–∏—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ "–û–∑–≤—É—á–∫–∞" –≤ header (desktop + mobile)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ –≤ Quick Actions –º–æ–±–∏–ª—å–Ω–æ–≥–æ –º–µ–Ω—é
- ‚úÖ URL: `/create/studio?section=voice`

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- ‚úÖ `src/components/voice/ImageUploader.tsx`
  - Drag-and-drop –∑–∞–≥—Ä—É–∑–∫–∞
  - –ü—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ

- ‚úÖ `src/components/voice/VoiceRecorder.tsx`
  - –ó–∞–ø–∏—Å—å —Å –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ (MediaRecorder API)
  - –¢–∞–π–º–µ—Ä —Å –ª–∏–º–∏—Ç–æ–º
  - –ü—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

- ‚úÖ `src/components/voice/AudioInput.tsx`
  - –¢–∞–±—ã: –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ / –∑–∞–ø–∏—Å—å –≥–æ–ª–æ—Å–∞
  - –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∞—É–¥–∏–æ
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –ª–∏–º–∏—Ç–∞ –¥–ª—è InfiniteTalk
  - –ü—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ –∞—É–¥–∏–æ

- ‚úÖ `src/components/voice/VoiceSection.tsx`
  - –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ (3 –≤–∞—Ä–∏–∞–Ω—Ç–∞)
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
  - –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
  - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (prompt, seed)
  - Polling —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á–∏
  - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

### 3. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

#### –ú–∞—Ä—à—Ä—É—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∞—É–¥–∏–æ –∏–ª–∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≥–æ–ª–æ—Å
3. –í—ã–±–∏—Ä–∞–µ—Ç –º–æ–¥–µ–ª—å (Kling/InfiniteTalk)
4. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –≤–≤–æ–¥–∏—Ç –ø—Ä–æ–º–ø—Ç –∏ seed
5. –°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç—å
6. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –±–∞–ª–∞–Ω—Å –∫—Ä–µ–¥–∏—Ç–æ–≤
7. –°–ø–∏—Å—ã–≤–∞–µ—Ç –∫—Ä–µ–¥–∏—Ç—ã
8. –í—ã–∑—ã–≤–∞–µ—Ç KIE API
9. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç task_id –≤ –ë–î
10. Polling —Å—Ç–∞—Ç—É—Å–∞ –∏–ª–∏ callback –æ—Ç KIE
11. –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
12. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–∏–¥–µ–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

#### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫—Ä–µ–¥–∏—Ç–æ–≤
- –§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π
- –ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç
- –ê—É–¥–∏–æ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ (InfiniteTalk)
- –û—à–∏–±–∫–∞ KIE API
- –¢–∞–π–º–∞—É—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- Refund –∫—Ä–µ–¥–∏—Ç–æ–≤ –ø—Ä–∏ –æ—à–∏–±–∫–µ

## üìã –ß–µ–∫-–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

- ‚úÖ –ö–æ–Ω—Ñ–∏–≥ –º–æ–¥–µ–ª–µ–π
- ‚úÖ Pricing (SKU + —Ü–µ–Ω—ã)
- ‚úÖ KIE Client (—Ç–∏–ø—ã + –º–µ—Ç–æ–¥)
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î
- ‚úÖ Upload API
- ‚úÖ Lipsync API
- ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è (header + studio page)
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã UI
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ Polling —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ë–î:
   ```bash
   # –í Supabase Dashboard ‚Üí SQL Editor
   # –í—ã–ø–æ–ª–Ω–∏—Ç—å —Ñ–∞–π–ª: supabase/migrations/20260129_lipsync_support.sql
   ```

2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   - `KIE_API_KEY` - API –∫–ª—é—á KIE
   - `KIE_CALLBACK_SECRET` - —Å–µ–∫—Ä–µ—Ç –¥–ª—è webhook
   - `KIE_CALLBACK_URL` - URL –¥–ª—è callback (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
   - –ù–∞–≤–∏–≥–∞—Ü–∏—è –Ω–∞ `/create/studio?section=voice`
   - –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (JPG/PNG/WEBP –¥–æ 10MB)
   - –ó–∞–≥—Ä—É–∑–∫–∞ –∞—É–¥–∏–æ –∏–ª–∏ –∑–∞–ø–∏—Å—å –≥–æ–ª–æ—Å–∞ (–¥–æ 15 —Å–µ–∫ –¥–ª—è InfiniteTalk)
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª—å—é
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ø–∏—Å–∞–Ω–∏—è –∫—Ä–µ–¥–∏—Ç–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è

### –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
1. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
   - –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–π (success rate)
   - –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
   - –û—à–∏–±–∫–∏ KIE API
   - –†–µ—Ñ–∞–Ω–¥—ã –∫—Ä–µ–¥–∏—Ç–æ–≤

2. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
   - –°–æ–∑–¥–∞—Ç—å FAQ
   - –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –ª—É—á—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –≤—ã–±–æ—Ä—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:
   - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Å—Å–µ—Ç–æ–≤ –Ω–∞ CDN
   - –°–∂–∞—Ç–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π
   - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è WAV ‚Üí MP3 –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏

## üìö API Reference

### POST /api/upload/voice-assets
```typescript
FormData:
  file: File
  type: 'image' | 'audio'

Response:
  { url: string }
```

### POST /api/generate/lipsync
```typescript
Request:
  {
    model: 'kling-ai-avatar' | 'infinitalk-480p' | 'infinitalk-720p',
    imageUrl: string,
    audioUrl: string,
    prompt?: string,
    seed?: number
  }

Response:
  {
    success: true,
    taskId: string,
    generationId: string,
    status: 'queued',
    creditCost: number,
    sku: string,
    estimatedTime: number
  }
```

### GET /api/jobs/[jobId]
```typescript
Response:
  {
    status: 'queued' | 'generating' | 'completed' | 'failed',
    outputs?: [{ url: string }],
    result_url?: string,
    asset_url?: string,
    error_message?: string
  }
```

## üéØ –ú–æ–¥–µ–ª–∏

### Kling AI Avatar
- **–¶–µ–Ω–∞**: 50‚≠ê (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è)
- **–ö–∞—á–µ—Å—Ç–≤–æ**: –í—ã—Å–æ–∫–æ–µ
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: –ö–æ–Ω—Ç—Ä–æ–ª—å —ç–º–æ—Ü–∏–π —á–µ—Ä–µ–∑ –ø—Ä–æ–º–ø—Ç
- **–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
- **API Model**: `kling/ai-avatar-standard`

### InfiniteTalk 480p
- **–¶–µ–Ω–∞**: 3‚≠ê/—Å–µ–∫
- **–ö–∞—á–µ—Å—Ç–≤–æ**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ (480p)
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: –ë—ã—Å—Ç—Ä–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ–Ω–∏—è
- **–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –î–æ 15 —Å–µ–∫—É–Ω–¥
- **API Model**: `infinitalk/from-audio`

### InfiniteTalk 720p
- **–¶–µ–Ω–∞**: 12‚≠ê/—Å–µ–∫
- **–ö–∞—á–µ—Å—Ç–≤–æ**: HD (720p)
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ–Ω–∏—è
- **–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –î–æ 15 —Å–µ–∫—É–Ω–¥
- **API Model**: `infinitalk/from-audio`

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î
```sql
generations {
  section: 'voice',
  type: 'video',
  model_id: 'kling-ai-avatar' | 'infinitalk-480p' | 'infinitalk-720p',
  image_url: 'https://...',
  audio_url: 'https://...',
  audio_duration: 12.5,
  resolution: '480p' | '720p',
  task_id: 'kie_xxx',
  sku: 'kling_ai_avatar:standard',
  charged_stars: 50,
  pricing_version: '2026-01-27'
}
```

### KIE API Request
```json
{
  "model": "kling/ai-avatar-standard",
  "input": {
    "image_url": "https://...",
    "audio_url": "https://...",
    "prompt": "happy emotions",
    "resolution": "720p",
    "seed": 42000
  },
  "callBackUrl": "https://lensroom.ru/api/webhooks/kie?secret=xxx"
}
```

## üìä –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ë–∞–∑–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
```typescript
// 1. –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
const imageForm = new FormData();
imageForm.append('file', imageFile);
imageForm.append('type', 'image');
const { url: imageUrl } = await fetch('/api/upload/voice-assets', {
  method: 'POST',
  body: imageForm
}).then(r => r.json());

// 2. –ó–∞–≥—Ä—É–∑–∏—Ç—å –∞—É–¥–∏–æ
const audioForm = new FormData();
audioForm.append('file', audioFile);
audioForm.append('type', 'audio');
const { url: audioUrl } = await fetch('/api/upload/voice-assets', {
  method: 'POST',
  body: audioForm
}).then(r => r.json());

// 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é
const result = await fetch('/api/generate/lipsync', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    model: 'kling-ai-avatar',
    imageUrl,
    audioUrl,
    prompt: 'happy and energetic'
  })
}).then(r => r.json());

// 4. Polling —Å—Ç–∞—Ç—É—Å–∞
const status = await fetch(`/api/jobs/${result.taskId}`)
  .then(r => r.json());
```

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **InfiniteTalk**: –ú–∞–∫—Å–∏–º—É–º 15 —Å–µ–∫—É–Ω–¥ –∞—É–¥–∏–æ
2. **–§–∞–π–ª—ã**: –ú–∞–∫—Å 10MB –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, 20MB –¥–ª—è –∞—É–¥–∏–æ
3. **–§–æ—Ä–º–∞—Ç—ã**: JPG/PNG/WEBP –¥–ª—è —Ñ–æ—Ç–æ, MP3/WAV/WEBM –¥–ª—è –∞—É–¥–∏–æ
4. **–í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏**: 2-5 –º–∏–Ω—É—Ç –≤ —Å—Ä–µ–¥–Ω–µ–º
5. **Refund**: –ü—Ä–∏ –æ—à–∏–±–∫–µ –∫—Ä–µ–¥–∏—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ–∏—Å–∫ –ø–æ "[Lip Sync]")
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏ –≤ –ë–î: `SELECT * FROM generations WHERE task_id = 'xxx'`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook –ª–æ–≥–∏ KIE
